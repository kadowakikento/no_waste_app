<h1>冷蔵庫一覧</h1>

<h3>商品名キーワード検索</h3>
<%= search_form_for @q, url: search_foods_path do |f| %>
  <%= f.search_field :name_cont %>
  <%= f.submit '検索' %>
<% end %>
<br><hr>
<table>
  <thead>
    <tr>
      <th>商品</th>
      <th><%= sort_link(@q, :due_time, "期限", hide_indicator: true )%></th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @foods.each do |food| %>
      <tr>
        <td><%= food.name %></td>
        <td><%= food.due_time&.strftime("%Y/%m/%d %H:%M") %></td>
        <%# <td><%= link_to 'Show', food %></td> 
        <td><%= link_to '編集', edit_food_path(food) %></td>
        <td><%= link_to '削除', food, method: :delete, data: { confirm: '本当に削除しますか？' } %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<br>

<%= link_to '冷蔵庫に追加', new_food_path %>
<br>
<br>
<%= month_calendar(attribute: :due_time, events: @foods) do |date, foods| %>
  <%= date.day %>
  <% foods.each do |food| %>
    <div>
      <%= food.name %>
    </div>
  <% end %>
<% end %>